<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<title>2019全国两会住京全国政协委员说</title>
		<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
		<!-- Link Swiper's CSS -->
		<link rel="stylesheet" href="lib/swiper-3.4.2.min.css">
		<link rel="stylesheet" type="text/css" href="lib/style.css"/>
	</head>
	
	<body>
		<!--内容展示-->
		<div class="swiper-container swiper-container-v">
			<div class="swiper-wrapper">
				<!--动画页-->
				<div class="swiper-slide">
					<img class="bgd0" src="img/cover_6.png" alt=""/>
					<img class="itemAni0_1" src="img/cover_5.png" alt=""/>
					<img class="itemAni0_2" src="img/cover_1.png" alt=""/>
					<img class="itemAni0_3" src="img/cover_2.png" alt=""/>
					<img class="itemAni0_4" src="img/cover_3.png" alt=""/>
					<img class="itemAni0_5" src="img/cover_4.png" alt=""/>
				</div>  
				<!--si-->
				<div class="swiper-slide">
					<img class="commBgd" src="img/commBgd.png" alt="" />
					<img class="logo" src="img/cover_7.png">
					<img class="commTitle" src="img/commTitle4.jpg" alt="" />
					<!-- 使用video嵌入本地视频 -->
			        <video class="mainvideo" id="mainvideo4" src="video/4.mp4" type="video/mp4"  poster="img/poster4.jpg"   controls="controls" webkit-playsinline="true"  playsinline="true"  x-webkit-airplay="allow" >
			        </video>
			        
				</div>
				<!--yi-->
				<div class="swiper-slide">
					<img class="commBgd" src="img/commBgd.png" alt="" />
					<img class="logo" src="img/cover_7.png">
					<img class="commTitle" src="img/commTitle1.jpg" alt="" />
					<!-- 使用video嵌入本地视频 -->
			        <video class="mainvideo" id="mainvideo1" src="video/1.mp4" type="video/mp4"  poster="img/poster1.jpg"   controls="controls" webkit-playsinline="true"  playsinline="true"  x-webkit-airplay="allow"  >
			        </video>
				</div>
				<!--er-->
				<div class="swiper-slide">
					<img class="commBgd" src="img/commBgd.png" alt="" />
					<img class="logo" src="img/cover_7.png">
					<img class="commTitle" src="img/commTitle2.jpg" alt="" />
					<!-- 使用video嵌入本地视频 -->
			        <video class="mainvideo" id="mainvideo2" src="video/2.mp4" type="video/mp4"  poster="img/poster2.jpg"   controls="controls" webkit-playsinline="true"  playsinline="true"  x-webkit-airplay="allow" >
			        </video>
	
				</div>
				<!--san-->
				<div class="swiper-slide">
					<img class="commBgd" src="img/commBgd.png" alt="" />
					<img class="logo" src="img/cover_7.png">
					<img class="commTitle" src="img/commTitle3.jpg" alt="" />
					<!-- 使用video嵌入本地视频 -->
			        <video class="mainvideo" id="mainvideo3" src="video/3.mp4" type="video/mp4"  poster="img/poster3.jpg"   controls="controls" webkit-playsinline="true"  playsinline="true"  x-webkit-airplay="allow" >
			        </video>
				</div>
				<!--wu-->
				<div class="swiper-slide">
					<img class="commBgd" src="img/commBgd.png" alt="" />
					<img class="logo" src="img/cover_7.png">
					<img class="commTitle" src="img/commTitle5.jpg" alt="" />
					<!-- 使用video嵌入本地视频 -->
			        <video class="mainvideo" id="mainvideo5" src="video/5.mp4" type="video/mp4"  poster="img/poster5.jpg"   controls="controls" webkit-playsinline="true"  playsinline="true"  x-webkit-airplay="allow" >
			        </video>
				</div>
				<!--liu-->
				<div class="swiper-slide">
					<img class="commBgd" src="img/commBgd.png" alt="" />
					<img class="logo" src="img/cover_7.png">
					<img class="commTitle" src="img/commTitle6.jpg" alt="" />
					<!-- 使用video嵌入本地视频 -->
			        <video class="mainvideo" id="mainvideo6" src="video/6.mp4" type="video/mp4"  poster="img/poster6.jpg"   controls="controls" webkit-playsinline="true"  playsinline="true"  x-webkit-airplay="allow" >
			        </video>					
				</div>
				<!--qi-->
				<div class="swiper-slide">
					<img class="commBgd" src="img/commBgd.png" alt="" />
					<img class="logo" src="img/cover_7.png">
					<img class="commTitle" src="img/commTitle7.jpg" alt="" />
					<!-- 使用video嵌入本地视频 -->
			       <video class="mainvideo" id="mainvideo7" src="video/7.mp4" type="video/mp4"  poster="img/poster7.jpg"   controls="controls" webkit-playsinline="true"  playsinline="true"  x-webkit-airplay="allow" >
			       </video>
				</div>
				<!--ba-->
				<div class="swiper-slide">
					<img class="commBgd" src="img/commBgd.png" alt="" />
					<img class="logo" src="img/cover_7.png">
					<img class="commTitle" src="img/commTitle8.jpg" alt="" />
					<!-- 使用video嵌入本地视频 -->
			        <video class="mainvideo" id="mainvideo8" src="video/8.mp4" type="video/mp4"  poster="img/poster8.jpg"   controls="controls" webkit-playsinline="true"  playsinline="true"  x-webkit-airplay="allow" >
			        </video>
				</div>
				<!--jiu-->
				<div class="swiper-slide">
					<img class="commBgd" src="img/commBgd.png" alt="" />
					<img class="logo" src="img/cover_7.png">
					<img class="commTitle" src="img/commTitle9.jpg" alt="" />
					<!-- 使用video嵌入本地视频 -->
			        <video class="mainvideo" id="mainvideo9" src="video/9.mp4" type="video/mp4"  poster="img/poster9.jpg"   controls="controls" webkit-playsinline="true"  playsinline="true"  x-webkit-airplay="allow" >
			        </video>
				</div>
				<!--shi-->
				<div class="swiper-slide">
					<img class="commBgd" src="img/commBgd.png" alt="" />
					<img class="logo" src="img/cover_7.png">
					<img class="commTitle" src="img/commTitle10.jpg" alt="" />
					<!-- 使用video嵌入本地视频 -->
			        <video class="mainvideo" id="mainvideo10" src="video/10.mp4" type="video/mp4"  poster="img/poster10.jpg"   controls="controls" webkit-playsinline="true"  playsinline="true"  x-webkit-airplay="allow" >
			        </video>
				</div>
				<!--find-->
				<div class="swiper-slide">
					<img class="backCoverBgd" src="img/backCover_bgd.png" alt="" />
					<img class="backCoverBuilding" src="img/cover_9.png" alt="" />
					<img class="backCoverTxt" src="img/cover_8.png" alt="" />
					<img class="backCoverBtn" src="img/backCover_btn.png">
				</div>
			</div>
			<!-- Add Pagination -->
			<div class="swiper-pagination swiper-pagination-v"></div>
		</div>
		<!--下一页箭头标识-->
		<img class="arrow" src="img/y_arrow.png" />
		<!-- Swiper JS -->
		<script src="lib/jquery-1.8.3.min.js"></script>
		<script src="lib/swiper-3.4.2.jquery.min.js"></script>
		<script src="lib/TweenMax.min.js"></script>
		<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
		<script type="text/javascript">
			var vh = $(window).height();
			var vw = $(window).width();
			var imgRatio = 750 / 1334;
			console.log(vw / vh + "   " + imgRatio);
			if((vw / vh) > imgRatio) {
				$('.mainvideo').css('width', '90%');
			}
			/*设置宽高适配*/
			if(vw > vh) {
				$('.swiper-container').height(vh);
				$('.swiper-container').width(vh * imgRatio);
			}
			$('img').load(function(){
				console.log("img loaded")
			})
			
		    function makeSlideWithArrow(){
		        swiperV.enableTouchControl();
		        $('.arrow').show();
		    }
			/*动画设置开始*/
			//第0帧,封面	
			var tl0=new TimelineMax();
			var ani0_1=TweenMax.from($('.itemAni0_1'), 1, {scale:0,opacity:0,left:'-50%',top:'80%',ease:Power0.easeOut,delay:4.5,onComplete:function(){$('.arrow').show()}});
			var ani0_2=TweenMax.from($('.itemAni0_2'), 1, {y:'800%',ease:Power3.easeOut,delay:1});
			var ani0_3=TweenMax.from($('.itemAni0_3'), 2, {x:'110%',ease:Power3.easeOut,delay:2});
			var ani0_4=TweenMax.from($('.itemAni0_5'), 1.5, {y:'110%',ease:Power3.easeOut,delay:3});
			var ani0_5=TweenMax.from($('.itemAni0_4'), 1, {opacity:0,scale:0,delay:4,ease: Elastic.easeOut,delay:4});
			tl0.add([ani0_1,ani0_2,ani0_3,ani0_4,ani0_5]).pause();
				tl0.play();
				
			/*重新看一遍*/
			$('.backCoverBtn').click(function(){
				window.location.reload();
				//console.log(location.href)
				window.location.href = location.href+'?time='+((new Date()).getTime());
			})
			/*动画设置结束*/
			var curIdx = 0;
			var targIdx = 0;
			//var canMoveBgd=true;

			var swiperV = new Swiper('.swiper-container-v', {
				pagination: '.swiper-pagination-v',
				paginationClickable: true,
				direction: 'vertical',
				spaceBetween: 0,
				mousewheelControl: true,
				onSlideChangeStart: function(swiper) {
					var myVideos = document.getElementsByTagName('video');
					for(i=0;i<myVideos.length;i++){
						myVideos[i].pause();
					}
					targIdx = swiper.activeIndex;
					console.log(targIdx);
					/*最后一页隐藏*/
					if(targIdx == 11) {
						$('.arrow').hide();
					} else {
					
					}

				},
				onSlideChangeEnd: function(swiper) {
					
				}
			});	
			/*//--创建触摸监听，当浏览器打开页面时，触摸屏幕触发事件，进行音频播放
		    document.addEventListener('touchstart', function() {
		    	alert(targIdx);
		        document.getElementById('mainvideo'+(parseInt(targIdx)+1)).play();		        
		    })*/
			//微信分享缩略图
			$.ajax({
				type: "get",
				async: true,
				url: "http://partner.qianlong.com/api/weixin/share/qianlong",
				dataType: "jsonp",
				data: {
					"weburl": location.href.split("#")[0]
				},
				success: function(json) {
					wx.config({
						debug: false,
						appId: json.appId,
						timestamp: json.timestamp,
						nonceStr: json.nonceStr,
						signature: json.signature,
						jsApiList: ['onMenuShareAppMessage', 'onMenuShareTimeline', 'onMenuShareQQ', 'onMenuShareWeibo', 'onMenuShareQZone']
					});
				},
				error: function() {
					console.log("share error");
				}
			});

			wx.ready(function() {
				console.log("ready to share");
				var obj_co = {
						title: "2019全国两会住京全国政协委员说",
						link: "http://partner.qianlong.com/h5/h5_2019lhjyl_wy",
						imgUrl: "http://partner.qianlong.com/h5/h5_2019lhjyl_wy/img/cover_2.png",
						success: function() {},
						cancel: function() {}
					},
					obj_co_desc = {
						desc: ""
					},
					obj_timeline = $.extend({}, obj_co),
					obj_appmsg = $.extend({}, obj_co_desc, obj_co),
					obj_qq = $.extend({}, obj_co_desc, obj_co),
					obj_wb = $.extend({}, obj_co_desc, obj_co),
					obj_qzone = $.extend({}, obj_co_desc, obj_co);

				wx.onMenuShareTimeline(obj_timeline);
				wx.onMenuShareAppMessage(obj_appmsg);
				wx.onMenuShareQQ(obj_qq);
				wx.onMenuShareWeibo(obj_wb);
				wx.onMenuShareQZone(obj_qzone);

			});

			wx.error(function(res) {
				console.log(res.errMsg);
				//alert(res.errMsg);
			});
		</script>
	</body>

</html>