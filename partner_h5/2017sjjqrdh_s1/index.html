<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>一二三四五　从这里和机器人大咖约个会</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">

    <!-- Link Swiper's CSS -->
    <link rel="stylesheet" href="lib/swiper-3.4.2.min.css">

    <!-- Demo styles -->
    <style>
        html, body {
            position: relative;
            height: 100%;
        }
        body {
            background: #111020;
            font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
            font-size: 62.5%;
            color:#000;
            margin: 0;
            padding: 0;
        }
        .swiper-container {
            width: 100%;
            height: 100%;
        }
        .swiper-slide {
            text-align: center;
            font-size: 18px;
            /* Center slide text vertically */
            display: -webkit-box;
            display: -ms-flexbox;
            display: -webkit-flex;
            display: flex;
            -webkit-box-pack: center;
            -ms-flex-pack: center;
            -webkit-justify-content: center;
            justify-content: center;
            -webkit-box-align: center;
            -ms-flex-align: center;
            -webkit-align-items: center;
            align-items: center;
			overflow: hidden;

        }
        .swiper-container-f .swiper-wrapper{
            animation-duration:2000ms;
            -webkit-animation-duration:2000ms;
        }
        .swiper-slide img {
            width:100%;
			position:absolute;
        }
		
		.arrow{position: absolute;bottom:10px;left:48%;z-index: 10;width:1em;display:none;}
        .loading{position: absolute;top:20%;text-align: center;z-index: 11;width:100%;}
        .swiper-pagination{display: none;}
		.btnMusic {
			position: absolute;
			right: 10px;
			top: 10px;
			z-index: 100;
			width:3em;
			height:3em;
		}
		.bgd{position:absolute;width:100%;}
		.bgd img{
			position:absolute;
			top:0;
			left:0;
			width:100%;
		}
		/*_________________*/
		
		.itemAni0_1{position:absolute;left:0;bottom:2.5em;opacity:0;z-index:1;}
		.itemAni0_2{position:absolute;left:0;bottom:4.3em;z-index:2;opacity:0;}
		.itemAni0_3{position:absolute;left:0;top:-50%;z-index:3;opacity:0;}
		.itemAni0_4{position:absolute;left:0;top:82%;z-index:4;opacity:0;}
		
		.box0Set {
			width: 100%;
			position: absolute;
			top: 10%;
			left: 0;
			display:0;
		}
		.box0Set img {
			position: relative;
			margin-bottom: 1em;
			opacity: 0;
			-ms-transform: scale(0, 0); /* IE 9 */
			-webkit-transform: scale(0, 0); /* Safari */
			transform: scale(0, 0);
		}
		

		.itemAni1_1{
			position:absolute;
			 left: 0.4em;
			top:2.5em;
			opacity:0;
			z-index:1
			-ms-transform: scale(0, 0); /* IE 9 */
			-webkit-transform: scale(0, 0); /* Safari */
			transform: scale(0, 0);
		}
		
		.itemAni2_1{
			position:absolute;
			 left: 0.2em;
			top:2.5em;
			opacity:0;
			z-index:1
			-ms-transform: scale(0, 0); /* IE 9 */
			-webkit-transform: scale(0, 0); /* Safari */
			transform: scale(0, 0);
		}
		
		.itemAni3_1{
			position:absolute;
			 left: 0.2em;
			top:2.5em;
			opacity:0;
			z-index:1
			-ms-transform: scale(0, 0); /* IE 9 */
			-webkit-transform: scale(0, 0); /* Safari */
			transform: scale(0, 0);
		}
		.itemAni4_1{position:absolute;left:-110%;top:2.5em;z-index:1;}
		.itemAni4_2{position:absolute;left:110%;top:7em;z-index:1;}
		.itemAni4_3{position:absolute;left:110%;top:12em;z-index:1;}
		.itemAni4_4{position:absolute;left:110%;top:17em;z-index:1;}
		.itemAni4_5{position:absolute;left:110%;top:22em;z-index:1;}
		
		
		.itemAni5_1{position:absolute;left:0;top:2.5em;z-index:1;}
        .itemAni6_1{
			position:absolute;
			 left: 0.2em;
			top:2.5em;
			opacity:0;
			z-index:1
			-ms-transform: scale(0, 0); /* IE 9 */
			-webkit-transform: scale(0, 0); /* Safari */
			transform: scale(0, 0);
		}
		.itemAni7_1{position:absolute;left:-110%;top:2.5em;opacity:0;z-index:1;}
		.itemAni8_1{position:absolute;left:110%;top:2.5em;opacity:0;z-index:1;}
		.itemAni8_2{position:absolute;left:0;bottom:-20%;opacity:0;z-index:1;}

    </style>
</head>
<body>
<!-- Swiper -->
<!--
<p class="loading">loading...</p>-->
<div class="bgd">
	<img src="img/bgd.jpg"/>
</div>
<div class="swiper-container swiper-container-v">
    <div class="swiper-wrapper">
        <div class="swiper-slide">
			<img class="itemAni0_1" src="img/0-1.png" alt=""/>
			<img class="itemAni0_2" src="img/0-2.png" alt=""/>
			<img class="itemAni0_3" src="img/0-3.png" alt=""/>
			<img class="itemAni0_4" src="img/0-4.png" alt=""/>
			<div class="box0Set">
			<img class="box0" src="img/0-5.png" alt=""/>
			<img class="box0" src="img/0-6.png" alt=""/>
			<img class="box0" src="img/0-7.png" alt=""/>
			<img class="box0" src="img/0-8.png" alt=""/>
			<img class="box0" src="img/0-9.png" alt=""/>
			</div>
		</div>
        <div class="swiper-slide">
            <img class="itemAni1_1" src="img/1-1.png" alt=""/>
        </div>
        <div class="swiper-slide">
            <img class="itemAni2_1" src="img/2-1.png" alt=""/>
        </div>
		<div class="swiper-slide">
            <img class="itemAni3_1" src="img/3-1.png" alt=""/>
        </div>
		<div class="swiper-slide">
			<img class="itemAni4_1" src="img/4-1.png" alt=""/>
			<img class="itemAni4_2" src="img/4-2.png" alt=""/>
			<img class="itemAni4_3" src="img/4-3.png" alt=""/>
			<img class="itemAni4_4" src="img/4-4.png" alt=""/>
			<img class="itemAni4_5" src="img/4-5.png" alt=""/>
		</div>
		<div class="swiper-slide">
            <img class="itemAni5_1" src="img/5-1.png" alt=""/>
        </div>
		<div class="swiper-slide">
            <img class="itemAni6_1" src="img/6-1.png" alt=""/>
        </div>
		<div class="swiper-slide">
            <img class="itemAni7_1" src="img/7-1.png" alt=""/>
        </div>
		<div class="swiper-slide">
            <img class="itemAni8_1" src="img/8-1.png" alt=""/>
			<img class="itemAni8_2" src="img/8-2.png" alt=""/>
        </div>
    </div>
    <!-- Add Pagination -->
    <div class="swiper-pagination swiper-pagination-v"></div>
</div>
<img class="btnMusic" src="img/music.png">
<img class="arrow" src="img/arrow.png" />
<!-- Swiper JS -->
<script src="lib/jquery-1.8.3.min.js"></script>
<script src="lib/swiper-3.4.2.jquery.min.js"></script>
<script src="lib/TweenMax.min.js"></script>
<script src="lib/howler.min.js"></script>
<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>

<!-- Initialize Swiper -->
<script>
    var vh=$(window).height();
    var vw=$(window).width();
    var imgRatio=750/1334;
    if(vw>vh){
        $('.swiper-container').height(vh);
        $('.swiper-container').width(vh*imgRatio);
    }
    var sndBgd=new Howl({
        src: ['bgd2.mp3'],
        autoplay: true,
        loop: true,
        volume: 0.4,
        onload: function() {
            //makeSlideWithArrow();
            //$('.loading').hide();
        }
    })

    
    function makeSlideWithArrow(){
        swiperV.enableTouchControl();
        $('.arrow').show();
    }

	var aniMusic=TweenMax.to($('.btnMusic'), 7.2, {rotation:360, delay:0,ease:'Linear.easeNone',repeat:99});
	
	
	
	//第0帧
	var tl0=new TimelineMax();
	TweenMax.set($('.itemAni0_1'), {scale:0, delay:0});
	TweenMax.set($('.itemAni0_4'), {scale:0, delay:0});
	var ani0_1=TweenMax.to($('.itemAni0_1'), 5, {scale:1,opacity:1,delay:1.5});
	var ani0_2=TweenMax.to($('.itemAni0_2'), 0.5, {opacity:1, delay:6.5});
	var ani0_3=TweenMax.to($('.itemAni0_3'), 10, {opacity:1, top:"4%",delay:8.5,ease: Power1.easeOut});
	var ani0_4=TweenMax.to($('.itemAni0_4'), 1, {opacity:1, scale:1,top:"52%",delay:19,ease:'Elastic.easeInOut'});
	tl0.add([ani0_1,ani0_2,ani0_3,ani0_4]).play();
	
	
	
	
	//第1帧
	var tl1=new TimelineMax();
	var ani1_1=TweenMax.to($('.itemAni1_1'), 0.5, {opacity:1, scale:1,delay:0});
	tl1.add([ani1_1]).pause();
	
	//第2帧
	var tl2=new TimelineMax();
	var ani2_1=TweenMax.to($('.itemAni2_1'), 0.5, {opacity:1, scale:1,delay:0});
	tl2.add([ani2_1]).pause();
	
	//第3帧
	var tl3=new TimelineMax();
	var ani3_1=TweenMax.to($('.itemAni3_1'), 0.5, {opacity:1, scale:1,delay:0});
	tl3.add([ani3_1]).pause();
	
	//第4帧
	var tl4=new TimelineMax();
	var ani4_1=TweenMax.to($('.itemAni4_1'), 0.5, {opacity:1,left:0,ease: Power4.easeOut,delay:0});
	var ani4_2=TweenMax.to($('.itemAni4_2'), 0.5, {opacity:1,left:0,ease: Power4.easeOut,delay:0.3});
	var ani4_3=TweenMax.to($('.itemAni4_3'), 0.5, {opacity:1,left:0,ease: Power4.easeOut,delay:0.7});
	var ani4_4=TweenMax.to($('.itemAni4_4'), 0.5, {opacity:1,left:0,ease: Power4.easeOut,delay:1.1});
	var ani4_5=TweenMax.to($('.itemAni4_5'), 0.5, {opacity:1,left:0,ease: Power4.easeOut,delay:1.5});
	tl4.add([ani4_1,ani4_2,ani4_3,ani4_4,ani4_5]).pause();
	
	//第5帧
	var tl5=new TimelineMax();
	var ani5_1=TweenMax.to($('.itemAni5_1'), 6, {top:'-30%',ease:Linear.easeNone,delay:0});
	tl5.add([ani5_1]).pause();
	
	//第6帧
	var tl6=new TimelineMax();
	var ani6_1=TweenMax.to($('.itemAni6_1'), 0.5, {opacity:1, scale:1,delay:1});
	tl6.add([ani6_1]).pause();
	
	//第7帧
	var tl7=new TimelineMax();
	var ani7_1=TweenMax.to($('.itemAni7_1'), 0.5, {opacity:1, left:0,delay:1});
	tl7.add([ani7_1]).pause();
	
	//第8帧
	var tl8=new TimelineMax();
	var ani8_1=TweenMax.to($('.itemAni8_1'), 0.5, {opacity:1, left:0,delay:1});
	var ani8_2=TweenMax.to($('.itemAni8_2'), 0.5, {opacity:1, bottom:0,delay:2});
	tl8.add([ani8_1,ani8_2]).pause();
	
	
	//所有帧动画数组
	var arrayTl=[tl0,tl1,tl2,tl3,tl4,tl5,tl6,tl7,tl8];
	
	
	
	
	var curIdx=0;
	var targIdx=0;
	var canMoveBgd=true;
	
    var swiperV = new Swiper('.swiper-container-v', {
        pagination: '.swiper-pagination-v',
        paginationClickable: true,
        direction: 'vertical',
        spaceBetween: 0,
		mousewheelControl : true,
		onSlideChangeStart: function(swiper){
			targIdx=swiper.activeIndex;
			if(canMoveBgd){
				if(targIdx>curIdx){
					TweenMax.to($('.bgd img'), 1, {opacity:1, top:'-=9.3em'});
				}else{
					TweenMax.to($('.bgd img'), 1, {opacity:1, top:'+=9.3em'});
				}
			}
			canMoveBgd=true;
			if(swiperV.isEnd || targIdx==0){
				$('.arrow').hide();
			}else{
				$('.arrow').show();
			}
			
          },
        onSlideChangeEnd: function(swiper){
			arrayTl[curIdx].reverse();
			//if(curIdx==0){
				//TweenMax.set($('.itemAni0_1'), {scale:0, delay:0});
				//TweenMax.set($('.itemAni0_4'), {scale:0, delay:0});
			//}
			arrayTl[targIdx].restart();
			curIdx=targIdx;
           
        }
    });
    //swiperV.disableTouchControl();
	tl0.play();
	$('.btnMusic').click(function(){
		if(sndBgd.playing()){
			aniMusic.pause();
			sndBgd.pause();
		}else{
			aniMusic.resume();
			sndBgd.play();
		}
		
	})
	
	$('.itemAni0_4').click(function(){
		TweenMax.to($('.itemAni0_3'), 0.5, {opacity:0, top:"-50%",delay:0,ease: Power4.easeOut});
		TweenMax.to($('.itemAni0_4'), 0.5, {opacity:0, scale:0,delay:0.5,ease: Power4.easeOut});
		var tl0a=new TimelineMax();
		var ani0Box=TweenMax.staggerTo('.box0',1,{scale:1,opacity:1,ease:Power2.easeOut,delay:2},0.2);
		tl0.add([ani0Box]).play();
		$('.arrow').show();
	})
	
	$('.itemAni8_2').click(function(){
		canMoveBgd=false;
		swiperV.slideTo(0, 500, true);
		$('.bgd img').css('top',0);
	})
	//微信分享缩略图
	$.ajax({
		type: "get",
		async: true,
		url: "http://partner.qianlong.com/api/weixin/share/qianlong",
		dataType: "jsonp",
		data: {
			"weburl": location.href.split("#")[0]
		},
		success: function(json){
			//console.log(json);
			wx.config({
				debug: false,
				appId: json.appId,
				timestamp: json.timestamp,
				nonceStr: json.nonceStr,
				signature: json.signature,
				jsApiList: ['onMenuShareAppMessage', 'onMenuShareTimeline', 'onMenuShareQQ', 'onMenuShareWeibo', 'onMenuShareQZone']
			});
		},
		error: function(){
			console.log("share error");
		}
	});

	wx.ready(function(){
		console.log("ready to share");
		var obj_co = {
					title: "一二三四五　从这里和机器人大咖约个会",
					link: "http://partner.qianlong.com/h5/2017sjjqrdh_s1",
					imgUrl: "http://partner.qianlong.com/h5/2017sjjqrdh_s1/img/thumb.jpg",
					success: function(){
					},
					cancel: function(){}
				},
				obj_co_desc = {
					desc: ""
				},
				obj_timeline = $.extend({}, obj_co),
				obj_appmsg = $.extend({}, obj_co_desc, obj_co),
				obj_qq = $.extend({}, obj_co_desc, obj_co),
				obj_wb = $.extend({}, obj_co_desc, obj_co),
				obj_qzone = $.extend({}, obj_co_desc, obj_co);

		wx.onMenuShareTimeline(obj_timeline);
		wx.onMenuShareAppMessage(obj_appmsg);
		wx.onMenuShareQQ(obj_qq);
		wx.onMenuShareWeibo(obj_wb);
		wx.onMenuShareQZone(obj_qzone);


	});

	wx.error(function (res) {
		console.log(res.errMsg);
		//alert(res.errMsg);
	});
	
	
	
</script>
</body>
</html>