<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>在对的时间和地点 有最美的遇见和预见</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">

    <!-- Link Swiper's CSS -->
    <link rel="stylesheet" href="lib/swiper-3.4.2.min.css">

    <!-- Demo styles -->
    <style>
        html, body {
            position: relative;
            height: 100%;
        }
        body {
            background: #fff;
            font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
            font-size: 62.5%;
            color:#000;
            margin: 0;
            padding: 0;
        }
        .swiper-container {
            width: 100%;
            height: 100%;
        }
        .swiper-slide {
            text-align: center;
            font-size: 18px;
            /* Center slide text vertically */
            display: -webkit-box;
            display: -ms-flexbox;
            display: -webkit-flex;
            display: flex;
            -webkit-box-pack: center;
            -ms-flex-pack: center;
            -webkit-justify-content: center;
            justify-content: center;
            -webkit-box-align: center;
            -ms-flex-align: center;
            -webkit-align-items: center;
            align-items: center;
			overflow: hidden;

        }
        .swiper-container-f .swiper-wrapper{
            animation-duration:2000ms;
            -webkit-animation-duration:2000ms;
        }
        .swiper-slide img {
            width:100%;
			position:absolute;
        }
		
		.arrow{position: absolute;bottom:10px;left:48%;z-index: 10;width:1.5em;}
        .loading{position: absolute;top:20%;text-align: center;z-index: 11;width:100%;}
        .swiper-pagination{display: none;}
		.btnMusic {
			position: absolute;
			right: 10px;
			top: 10px;
			z-index: 100;
			width:3em;
			height:3em;
		}
		.bgd{position:absolute;width:100%;}
		.bgd img{
			position:absolute;
			top:100%;
			left:0;
			width:100%;
		}
		/*_________________*/
		.bgd0 {
			left: 0;
			position: absolute;
		}
		.itemAni0_1{position:absolute;left:0;top:35%;z-index:2;}
		.itemAni0_2{
			position:absolute;
			left:0;
			top:50%;
			z-index:1;
			opacity:0;
			-ms-transform: scale(2, 2); /* IE 9 */
			-webkit-transform: scale(2, 2); /* Safari */
			transform: scale(2, 2);
		}
		.itemAni0_3{position:absolute;left:0;bottom:20%;z-index:3;}
		.itemAni0_4{position:absolute;left:0;bottom:12%;z-index:4;}


		.itemAni1_1{
			position:absolute;
			left: 0;
			top:2.5em;
		}
		.itemAni1_2{
			position:absolute;
			left:0;
			top:6em;
		}
		.itemAni2_1{
			position:absolute;
			left: 0;
			top:2.5em;
		}
		.itemAni2_2{
			position:absolute;
			left:0;
			top:6em;
		}
		.itemAni1_1{
			position:absolute;
			left: 0;
			top:2.5em;
		}
		.itemAni1_2{
			position:absolute;
			left:0;
			top:6em;
		}
		.itemAni2_1{
			position:absolute;
			left: 0;
			top:2.5em;
		}
		.itemAni2_2{
			position:absolute;
			left:0;
			top:6em;
		}
		.itemAni3_1{
			position:absolute;
			left: 0;
			top:2.5em;
		}
		.itemAni3_2{
			position:absolute;
			left:0;
			top:6em;
		}
		.itemAni4_1{
			position:absolute;
			left: 0;
			top:2.5em;
		}
		.itemAni4_2{
			position:absolute;
			left:0;
			top:6em;
		}
		.itemAni5_1{
			position:absolute;
			left: 0;
			top:2.5em;
		}
		.itemAni5_2{
			position:absolute;
			left:0;
			top:6em;
		}
		.itemAni6_1{
			position:absolute;
			left: 0;
			top:2.5em;
		}
		.itemAni6_2{
			position:absolute;
			left:0;
			top:6em;
		}
		.itemAni6_3{
			position:absolute;
			left:0;
			bottom:-4%;
		}
		.swiper-slide img.itemAni6_4{
			position:absolute;
			left:30%;
			bottom:8.5em;
			width:2.5em;
		}
		.swiper-slide img.itemAni6_5{
			position:absolute;
			left:42%;
			bottom:5em;
			width:4em;
		}
		.itemAni7_1{
			position:absolute;
			left: 0;
			top:20%;
		}
		
    </style>
</head>
<body>
<!-- Swiper -->
<!--
<p class="loading">loading...</p>-->
<div class="bgd">
	<img src="img/y_bgd.jpg"/>
</div>
<div class="swiper-container swiper-container-v">
    <div class="swiper-wrapper">
        <div class="swiper-slide">
			<img class="bgd0" src="img/bgd0.jpg" alt=""/>
			<img class="itemAni0_1" src="img/y0-1.png" alt=""/>
			<img class="itemAni0_2" src="img/y0-2.png" alt=""/>
			<img class="itemAni0_3" src="img/y0-3.png" alt=""/>
			<img class="itemAni0_4" src="img/y0-4.png" alt=""/>
		</div>                               
        <div class="swiper-slide">           
            <img class="itemAni1_1" src="img/y1-1.png" alt=""/>
			<img class="itemAni1_2" src="img/y1-2new.png" alt=""/>
        </div>                               
        <div class="swiper-slide">           
            <img class="itemAni2_1" src="img/y2-1.png" alt=""/>
			<img class="itemAni2_2" src="img/y2-2.png" alt=""/>
        </div>                               
		<div class="swiper-slide">           
            <img class="itemAni3_1" src="img/y3-1.png" alt=""/>
			<img class="itemAni3_2" src="img/y3-2.png" alt=""/>
        </div>                               
		<div class="swiper-slide">           
			<img class="itemAni4_1" src="img/y4-1.png" alt=""/>
			<img class="itemAni4_2" src="img/y4-2new.png" alt=""/>
		</div>                               
		<div class="swiper-slide">           
            <img class="itemAni5_1" src="img/y5-1.png" alt=""/>
			<img class="itemAni5_2" src="img/y5-2.png" alt=""/>
        </div>                               
		<div class="swiper-slide">           
            <img class="itemAni6_1" src="img/y6-1.png" alt=""/>
			<img class="itemAni6_2" src="img/y6-2.png" alt=""/>
			<img class="itemAni6_3" src="img/y6-3.png" alt=""/>
			<img class="itemAni6_4" src="img/y6-4.png" alt=""/>
			<img class="itemAni6_5" src="img/y6-4.png" alt=""/>
        </div>
		<div class="swiper-slide">
            <img class="itemAni7_1" src="img/y7-1.png" alt=""/>
        </div>

    </div>
    <!-- Add Pagination -->
    <div class="swiper-pagination swiper-pagination-v"></div>
</div>
<img class="btnMusic" src="img/music.png">
<img class="arrow" src="img/y_arrow.png" />
<!-- Swiper JS -->
<script src="lib/jquery-1.8.3.min.js"></script>
<script src="lib/swiper-3.4.2.jquery.min.js"></script>
<script src="lib/TweenMax.min.js"></script>
<script src="lib/howler.min.js"></script>
<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>

<!-- Initialize Swiper -->
<script>
    var vh=$(window).height();
    var vw=$(window).width();
    var imgRatio=750/1206;
	
    if(vw>vh){
        $('.swiper-container').height(vh);
        $('.swiper-container').width(vh*imgRatio);
    }
	
	var aniMusic;
	$('img').load(function(){
		console.log("img loaded")
	})
	
    var sndBgd=new Howl({
        src: ['bgd5.mp3'],
        autoplay: true,
        loop: true,
        volume: 0.4,
        onload: function() {
			console.log("sound loaded")
			//$('.swiper-container').show();
			tl0.play();
			aniMusic=TweenMax.to($('.btnMusic'), 7.2, {rotation:360, delay:0,ease:'Linear.easeNone',repeat:99})
        }
    })

    
    function makeSlideWithArrow(){
        swiperV.enableTouchControl();
        $('.arrow').show();
    }

	
	
	
	
	//第0帧
	
	var tl0=new TimelineMax();
	var ani0_1=TweenMax.from($('.itemAni0_1'), 1.5, {scale:0,opacity:0,ease:Power0.easeNone,delay:0.5});
	var ani0_2=TweenMax.to($('.itemAni0_2'), 1.5, {opacity:1, y:"-55%",scale:1,ease: Power2.easeOut,delay:2.5});
	var ani0_1b=TweenMax.to($('.itemAni0_1'), 1, {top:"5%",ease: Power2.easeIn,delay:2.5});
	//var ani0_1c=TweenMax.to($('.itemAni0_1'), 0.5, {top:"5%",scale:1,ease: Power0.easeIn,delay:4});
	var ani0_3=TweenMax.from($('.itemAni0_3'), 1, {opacity:0, x:"-100%",delay:4.5,ease: Power1.easeOut});
	var ani0_4=TweenMax.from($('.itemAni0_4'), 1, {opacity:0, x:"100%",delay:5.5,ease: Power1.easeOut});
	tl0.add([ani0_1,ani0_2,ani0_1b,ani0_3,ani0_4]).pause();
		//第1帧
	var tl1=new TimelineMax();
	var ani1_1=TweenMax.from($('.itemAni1_1'), 1, {x:"-100%",delay:0.5});
	var ani1_2=TweenMax.from($('.itemAni1_2'), 1, {scale:0,delay:2});
	tl1.add([ani1_1,ani1_2]).pause();
	
	//第2帧
	var tl2=new TimelineMax();
	var ani2_1=TweenMax.from($('.itemAni2_1'), 1, {x:"-100%",delay:0.5});
	var ani2_2=TweenMax.from($('.itemAni2_2'), 1, {scale:0,delay:2});
	tl2.add([ani2_1,ani2_2]).pause();
	
	//第3帧
	var tl3=new TimelineMax();
	var ani3_1=TweenMax.from($('.itemAni3_1'), 1, {x:"-100%",delay:0.5});
	var ani3_2=TweenMax.from($('.itemAni3_2'), 1, {scale:0,delay:2});
	tl3.add([ani3_1,ani3_2]).pause();
	
	//第4帧
	var tl4=new TimelineMax();
	var ani4_1=TweenMax.from($('.itemAni4_1'), 1, {x:"-100%",delay:0.5});
	var ani4_2=TweenMax.from($('.itemAni4_2'), 1, {scale:0,delay:2});
	tl4.add([ani4_1,ani4_2]).pause();
	
	//第5帧
	var tl5=new TimelineMax();
	var ani5_1=TweenMax.from($('.itemAni5_1'), 1, {x:"-100%",delay:0.5});
	var ani5_2=TweenMax.from($('.itemAni5_2'), 1, {scale:0,delay:2});
	tl5.add([ani5_1,ani5_2]).pause();
	
	//第6帧
	var tl6=new TimelineMax();
	var ani6_1=TweenMax.from($('.itemAni6_1'), 1, {x:"-100%",delay:0.5});
	var ani6_2=TweenMax.from($('.itemAni6_2'), 1, {scale:0,delay:2});
	var ani6_3=TweenMax.from($('.itemAni6_3'), 1, {opacity:0,delay:3});
	var ani6_4=TweenMax.from($('.itemAni6_4'), 1, {y:"-1000%",ease: Elastic.easeOut,delay:4.5});
	var ani6_5=TweenMax.from($('.itemAni6_5'), 1, {y:"-1000%",ease: Elastic.easeOut,delay:5.5});
	tl6.add([ani6_1,ani6_2,ani6_3,ani6_4,ani6_5]).pause();
	
	//第7帧
	var tl7=new TimelineMax();
	var ani7_1=TweenMax.from($('.itemAni7_1'), 1, {x:"-100%",ease: Power3.easeOut,delay:1});
	tl7.add([ani7_1]).pause();
	
	
	
	//所有帧动画数组
	var arrayTl=[tl0,tl1,tl2,tl3,tl4,tl5,tl6,tl7];
		
	var curIdx=0;
	var targIdx=0;
	//var canMoveBgd=true;
	
    var swiperV = new Swiper('.swiper-container-v', {
        pagination: '.swiper-pagination-v',
        paginationClickable: true,
        direction: 'vertical',
        spaceBetween: 0,
		mousewheelControl : true,
		onSlideChangeStart: function(swiper){
			targIdx=swiper.activeIndex;
				if(targIdx>curIdx){
					TweenMax.to($('.bgd img'), 1, {y:'-=4.8%'});
				}else{
					TweenMax.to($('.bgd img'), 1, {y:'+=4.8%'});
				}
		
          },
        onSlideChangeEnd: function(swiper){
			arrayTl[curIdx].seek(0.1).reverse();
			arrayTl[targIdx].restart();
			curIdx=targIdx;
           
        }
    });

	//tl0.play();
	$('.btnMusic').click(function(){
		if(sndBgd.playing()){
			aniMusic.pause();
			sndBgd.pause();
		}else{
			aniMusic.resume();
			sndBgd.play();
		}
		
	})
	

	//微信分享缩略图
	$.ajax({
		type: "get",
		async: true,
		url: "http://partner.qianlong.com/api/weixin/share/qianlong",
		dataType: "jsonp",
		data: {
			"weburl": location.href.split("#")[0]
		},
		success: function(json){
			//console.log(json);
			wx.config({
				debug: false,
				appId: json.appId,
				timestamp: json.timestamp,
				nonceStr: json.nonceStr,
				signature: json.signature,
				jsApiList: ['onMenuShareAppMessage', 'onMenuShareTimeline', 'onMenuShareQQ', 'onMenuShareWeibo', 'onMenuShareQZone']
			});
		},
		error: function(){
			console.log("share error");
		}
	});

	wx.ready(function(){
		console.log("ready to share");
		var obj_co = {
					title: "在对的时间和地点 有最美的遇见和预见",
					link: "http://partner.qianlong.com/h5/2017sjjqrdh_s5",
					imgUrl: "http://partner.qianlong.com/h5/2017sjjqrdh_s5/img/thumb5.jpg",
					success: function(){
					},
					cancel: function(){}
				},
				obj_co_desc = {
					desc: "WRC2017世界机器人大会"
				},
				obj_timeline = $.extend({}, obj_co),
				obj_appmsg = $.extend({}, obj_co_desc, obj_co),
				obj_qq = $.extend({}, obj_co_desc, obj_co),
				obj_wb = $.extend({}, obj_co_desc, obj_co),
				obj_qzone = $.extend({}, obj_co_desc, obj_co);

		wx.onMenuShareTimeline(obj_timeline);
		wx.onMenuShareAppMessage(obj_appmsg);
		wx.onMenuShareQQ(obj_qq);
		wx.onMenuShareWeibo(obj_wb);
		wx.onMenuShareQZone(obj_qzone);


	});

	wx.error(function (res) {
		console.log(res.errMsg);
		//alert(res.errMsg);
	});
	
	
	
</script>
</body>
</html>